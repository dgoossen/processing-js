<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>Processing JS</title>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
      <script type="text/javascript" src="../../processing.js"></script>

      <script type="text/javascript">
         var pjs, buffer;
         var width = 512;
         var source;

         $( function() {
            pjs = Processing('panel', 'void setup() {}');
            pjs.size( width, width );

            source = pjs.loadImage('/processing/images/lena-512.jpg', false, function() {
            });


            function recordTime( callback ) {
               var start = (new Date()).getTime();
               callback();
               var end   = (new Date()).getTime();

               return ( end - start );
            }

            $('#color').click( function() {
               var ms;
               var cycles = 250000;

               var orig = function() {
                  var len = cycles;
                  while( len-- ) {
                     pjs.color( 100, 100, 100, 100 );
                  }
               };

               var modified = function() {
                  var len = cycles;
                  while( len-- ) {
                     pjs.colorMod( 100, 100, 100, 100 );
                  }
               };

               ms = recordTime( orig );
               pjs.println('color(): '+ ms +'ms');
            });

            $('#loadPixels').click( function() {
               var ms;

               pjs.image( source, 0, 0 );

               ms = recordTime( function() {
                  pjs.loadPixels();
               });
               pjs.println('loadPixels(): '+ ms +'ms');
            });

            $('#updatePixels').click( function() {
               var ms;

               ms = recordTime( function() {
                  pjs.updatePixels();
               });
               pjs.println('updatePixels(): '+ ms +'ms');
            });
         });
      </script>
   </head>

   <body>
      <div id="anchor">
         <h1>Processing Examples</h1>
         <p>
            <input id="color" type="button" value="color()" />
            <input id="loadPixels" type="button" value="loadPixels()" />
            <input id="updatePixels" type="button" value="updatePixels()" />
         </p>

         <canvas id="panel"></canvas>

         <img src="/processing/images/lena-512.jpg" alt="" />
      </div>
   </body>
</html>
